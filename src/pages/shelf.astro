---
import BaseLayout from '../layouts/BaseLayout.astro';
import ShelfFilter from '../components/ShelfFilter.tsx';
import BookOpen from 'phosphor-astro/BookOpen.astro';
import { getCollection } from 'astro:content';

const shelfItems = (await getCollection('shelf'))
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .map((item) => ({
    title: item.data.title,
    creator: item.data.creator,
    type: item.data.type,
    annotation: item.data.annotation,
    url: item.data.url,
    tags: item.data.tags,
  }));
---

<BaseLayout title="Shelf â€” Travis Gilbert" description="Books, videos, tools, and other things worth recommending.">
  <section class="py-8">
    <h1 class="font-title text-3xl md:text-4xl font-bold mb-2 flex items-center gap-3">
      <BookOpen class="w-8 h-8 text-terracotta" />
      Shelf
    </h1>
    <p class="text-ink-secondary mb-8">Things I've read, watched, used, and recommend.</p>
  </section>

  <ShelfFilter client:load items={shelfItems} />
</BaseLayout>

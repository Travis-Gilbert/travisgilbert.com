---
import BaseLayout from '../layouts/BaseLayout.astro';
import Wrench from 'phosphor-astro/Wrench.astro';
import { getCollection, render } from 'astro:content';

const toolkitItems = (await getCollection('toolkit'))
  .sort((a, b) => a.data.order - b.data.order);

const categories = [
  { key: 'production', label: 'Production Workflow' },
  { key: 'tools', label: 'Tools I Use' },
  { key: 'philosophy', label: 'How I Think About Design' },
  { key: 'automation', label: 'AI & Automation' },
];
---

<BaseLayout title="Toolkit â€” Travis Gilbert" description="How I work: tools, processes, and philosophy.">
  <section class="py-8">
    <h1 class="font-title-alt text-3xl md:text-4xl font-semibold mb-2 flex items-center gap-3">
      <Wrench class="w-8 h-8 text-terracotta" />
      Toolkit
    </h1>
    <p class="text-ink-secondary mb-8">How I work: tools, processes, and philosophy.</p>
  </section>

  {categories.map(async (cat) => {
    const items = toolkitItems.filter((item) => item.data.category === cat.key);
    if (items.length === 0) return null;

    return (
      <section class="mb-12">
        <h2 class="font-title-alt text-2xl font-semibold mb-6">{cat.label}</h2>
        <div class="space-y-4">
          {await Promise.all(items.map(async (item) => {
            const { Content } = await render(item);
            return (
              <div class="border border-border rounded-xl bg-surface p-6">
                <div class="prose">
                  <Content />
                </div>
              </div>
            );
          }))}
        </div>
      </section>
    );
  })}
</BaseLayout>

<style>
  /* Architect combo: IBM Plex Sans body, Ysabeau headings, tighter spacing */
  .prose { font-family: var(--font-body-alt); font-size: 1rem; }
  .prose h2 { font-family: var(--font-title-alt); }
  .prose h3 { font-family: var(--font-title-alt); }
  .prose p { margin-bottom: 1rem; }
  .prose li { margin-bottom: 0.4rem; }
</style>
